\section{Introduction}
Imagine that six months ago, your team decided to adopt \quotes{Collective Code Ownership.} You've enjoyed the permission to be able to change any part of the code base. You recall that as you were implementing a feature, you found an unreported bug and simply fixed it. In fact, fixing it was easier than creating a ticket and asking the former owner to change it themselves. Just last week you refactored a pattern that spanned the entire system without needing to coordinate a team meeting to get everyone on the same page. Yet something doesn't feel quite right. Awhile ago, you looked at the Service Manager, it literally gave you a shudder for all of its complexity and obtuse code. You realize its impact when it showed up in a dream. The creator of the Service Manager was smart, maybe too smart, but not smart enough to simplify the design. Too bad they left the company a few months back.  While your team is allowed to modify every part of the code, you realize that you aren't enabled to modify every part of the code. Worse is this feeling that your team doesn't \quotes{own} the code.

The theory of sustainable software development through collective code ownership \cite{SustainableSoftwareDevelopment} introduced a solution to the problem of handling disruptions such as vacations, rotation of team members, churn, or growing team size. The theory fosters cross-sharing knowledge and simplifying code so that it is easy to maintain. The theory is composed of six synergistic practices: Pair Programming, Overlapping pair rotation, Knowledge Pollination, TDD / BDD, Continuous Refactoring, and Live on Master which work when the business adopts three policies: Shared Schedule , Avoid Technical Debt, and Collective Code Ownership.

This theory requires a shift from individual code ownership to collective code ownership. Instead of strong code ownership where one developer implements a complex feature, many developers shape the implementation as the baton of development is rotated through the team. 

The theory emerged from an iterative research method called Grounded Theory. We collected empirical data from participant observations of an Extreme Programming project at Pivotal and interviews of Pivotal engineers, designers and product managers. As aspects of the theory emerged, we collected additional data to validate and saturate the theory.

Our initial core question was: \quotes{What is happening at Pivotal when it comes to software development?} When \quotes{collective code ownership} emerged as a core category, additional sampling was collected to identify which situations would increase or decrease a programmer's sense of ownership and which practices were required to enable collective code ownership. 

In this paper, we examine which dimensions or factors affect the team's sense of ownership.

In section \ref{RelatedWork}, we position the theory relative to existing literature regarding collective code ownership. In section \ref{ResearchMethod}, we review how we employed Grounded Theory to derive a theory supported by empirical data. In section \ref{ResearchContext}, we present the research context explaining Pivotal. In section \ref{CollectiveCodeOwnership}, we examine the benefits and potential threats to collective code ownership. In section \ref{Transitioning}, we examine nuanced issues of transitioning to collective code ownership. In section \ref{TheoryEvaluation}, we evaluate the theory using established criteria for evaluating a grounded theory. In the last sections, we examine threats, future research, and conclude the research.



\section{Related Work}
\label{RelatedWork}
In Extreme Programming (First Edition) \cite{ExtremeProgramming2000} Kent Beck describes a set of interdependent practices that describe the management of feature development (much like Scrum \cite{Scrum}) as well as technical practices that facilitate a collaborative team environment that routinely delivers value to customers. 

 Kent Beck succinctly describes the Collective Ownership practice. The discussion centers around contrasting Collective Ownership against \quotes{no ownership} and \quotes{individual ownership.} The key description is \quotes{In XP, everybody takes responsibility for the whole of the system. Not everyone knows every part equally well, although everyone knows something about every part. If a pair is working and they see an opportunity to improve the code, they go ahead and improve it if it makes their life easier.}  \cite{ExtremeProgramming2000}

In Extreme Programming (Second Edition) \cite{ExtremeProgramming2004}, Kent Beck refines Extreme Programming into 13 primary practices and 11 corollary practices. Kent Beck renames Collective Ownership to Shared Code. He distills the practice into \quotes{Anyone on the team can improve any part of the system at any time.} 

In 2006, Martin Fowler define collective code ownership similarity to Kent Beck \cite{FowlerCodeOwnership} as a contrasting team position to \quotes{strong code ownership} where each file is owned by one person and `\quotes{weak code ownership} where developers can change files but owner keeps an eye on the file since they are responsible for it. 

In 2011, Christian Bird et al \cite{BirdDontTouchMyCode} contrast the effects of strong ownership and weak ownership and demonstrate that weak ownership lead to more defects than strong ownership for Windows Vista and Windows 7. They define ownership for a software component as a percentage of the git commits for a single developer. They define a major contributor as someone who has more than 5\% of the git commits. A sensitivity analysis revealed that defining strong code ownership as a range from 2\% to 10\% produced similar results for the study.

In 2015, Brendan Murphy says that the concept of code ownership needs to be unpacked and expanded. Research that defines code ownership as examining git commits to see who modified which files misses the complexities of ownership \cite{MurphyIEEESoftware}.

Collective Code Ownership requires more than a team saying \quotes{everyone can modify anything}. Instead, we are interested in how much the team feels that they collectively own the code. We define \quotes{sense of collective code ownership} as the degree to which individual members of the team feel collective ownership.  

\input{research-method.tex}
\section{Collective Code Ownership}
\label{CollectiveCodeOwnership}

In the literature, collective code ownership is treated as a policy statement. In practice, a team saying \quotes{anyone can modify any piece the code} is not sufficient to achieve the desired results. 

The theory of sustainable software development presents a set of related practices that must be in place to achieve collective code ownership. 

Collective code ownership is a dimension. On one side of the spectrum, each individual has ownership of the code, on the other side, everyone on the team owns the entire code base, and a team aiming for collective code ownership may land somewhere in between. 

Our research revealed that the sense of collective code ownership is dynamic. Project characteristics can actually erode the team's sense of ownership over the duration of a project. A team needs to counteract these erosions in order to increase their sense of ownership. Ownership is an emotional or qualitative attribute relating all the developers on the team to the project and the code base.

% People create software, and we need to factor psychological considerations. As one engineer expressed, \quotes{we are people} and our interactions with the code is as meaningful as the code itself. Listening, caring, and empathy for one another allows the team to work through differences of opinion towards a better than imagined code base. As one designer said, \quotes{you have to be an adult to work here.} Letting go of personal ownership enables the team to achieve results only achievable by the team. In need, Sustainable Software Development fosters an environment where the whole is more than the sum of the parts. 



% The current benefits from the continuous refactoring are actually enablements to help the team with collective code ownership. Code with poor discoverability, code that is hard to change decreases the team's sense of ownership.
\subsection{Research Question 1: What fosters affects the developer's sense of collective code ownership?}
In time, developers learn to loosely hold personal contributions and recognize lack of long term individual authorship. Three practices contribute to this dynamic: pair programming, overlapping pair rotation, and continuous refactoring.

\subsubsection{Pair Programming}
When each line of code is written by two developers, there is no clear owner. The pair can develop a sense of ownership over the code that they both contributed.

\subsubsection{Overlapping pair rotation}
The daily rotation of developers breaks down knowledge silos and spreads context throughout the team. Very quickly individuals work on multiple parts of the system. 

In some extreme programming companies, pairs never rotate. Two people work on one part of the code base developing strong ownership. The rest of the team does not feel empowered to modify their code as they rarely work on it. 

Here is an example pairing rotation for a four person team illustrating that each day: \texttt{
Day 1: (A B), (C D)
Day 2: (A C), (B D)
Day 3: (A D), (B C)
} On a four person team,  the new pairs have full context about yesterday's changes.

\subsubsection{Continuous Refactoring}
Most stories typically involve some refactoring, as developers are encouraged to make the code's design cleaner, easier to understand, and easier to find the component associated with its responsibility. (It's preferred to do pre-refactorings of doing complicated work to make the implementation of the current story as simple and easy as possible.) 

 As the team continuously improves the code base, code written by each person is slowly replaced and refactored. For some new hires at Pivotal, they enjoy the ability to modify and refactor any part of the code base while realizing that the code they contribute is slowly disappearing from the system. For some, this is not an easy transition.
\subsection{Research Question 2: What negatively affects a developer's sense of collective code ownership?}
\subsubsection{Increasing Team Size}

The primary researcher participated on teams of size 2, 4, 6, 6, and 10, and observed that as the team size increases, the ability to have context on the system decreases. Each day the other pairs are adding to the system. On a five pair team, so much work is happening each day that it is hard to keep track of everything that changes.

One developer on a 10 person project said, \quotes{I feel that we don't have that context spread around fully but then again having five, sometimes six pairs on the project makes it go really fast so it's hard to keep context \ldots it's a big team and you can be working on one track for a week perhaps and then the other four pairs like we move fast like things just change under you and you get back to some other place and you're like oh what happened here.  So because of that speed, it's harder to keep context on everything.}

When developers do not have context about part of a system, or context about what remains to be done to finish a story, reluctance to start the next at the top of the backlog emerges, they would rather take a story that touches part of the system that they know. As one developer reflected, \quotes{It does make me not completely comfortable to jump into stories on certain aspects.}

As a coping strategy, one developer before the start of the work day would skim the git commits from the previous day in order to learn about new classes, changes in design, and understand the features the team added. As a possible mitigation strategy, each pair of the entire team could start their pairing day by reviewing changes from the previous day. For a large team, this additional work becomes necessary. 

As team size increases, there is a potential risk of isolating each individual developer from a sense of code ownership. 

\subsubsection{ Increasing Code Apathy by deprioritizing Continuous Refactoring }

When developers are pressured to deliver more features at the expense of continuous refactoring, the code acquires technical debt, the code is harder to work with, and developers can become apathetic about the code. When developers begin to feel code apathy, this decreases their sense of code ownership. 

When refactoring is skipped, new code is simply bolted onto the existing design. Each time the team bolts something else on, it gets harder to bolt on something else. Thus, a dilemma arises for the programmers working on the next story to touch this part of the code: do they continue bolting on more code, or do they perform the pretermitted refactoring. When the team begins avoiding refactorings, it's a sign that code apathy may be settling in. Developers caring less about the craftsmanship of the code reflects a growing code apathy. 

One developer feels \quotes{proud and disgusted} about the code base. He is simultaneously proud of each refactoring that the team performed and disgusted by the technical debt the team accrued by taking shortcuts to ship more features. 

Before the first launch of a product, the product manager suggested that the team deliver more features at the cost of tech debt. For some of the team, this was an unacceptable tradeoff, and decided not to cut corners. Others on the team did choose technical debt, and the entire team ended up paying for the consequences by extensive refactors after the launch. On a team communal code base, one pair adding tech debt affects everyone on the team

When code apathy settles in, team members adopt the attitude that someone else will solve the problem. When this attitude permeates through a team, no one is solving the problems with the code. 

The team wants to feel a \quotes{pride of improving code quality}.  It feels good to be improving the code design and readability. If the team starts neglecting these items, it can create a sense of disgust, and an apathy of the code can spread throughout out the team.

\subsubsection{Increasing Product Apathy}
Product apathy settles in when a developer begins to not care about the features of the product. Part of the balanced team approach is collaboration. When the product manager isn't listening to feedback from the developers, the developers might feel less ownership of the product, and in turn be less motivated to work on the project.

When picking up a story, it is the developer's responsibility to verify that the story contains clear acceptance criteria. If it doesn't, conversations with the product manager are necessary. One developer recalled \quotes{In this case, I don't feel like spending the extra energy to go and say, `Hey, are you sure? Is this what you want?'} 

Given the technical complexity of the product sometimes the next story on the backlog would be blocked. Instead of proactively working with product, one developer adopted the attitude \quotes{Well, this [story] is blocked and it's somebody else's problem.} 

Product apathy can result in a less than perfect product.


\subsubsection{Increasing Team Apathy}
Team Apathy is when a developer does not feel apart of the team. It is hard to feel collective ownership of the code base when one doesn't feel part of the collective.

Example observed behaviors include interrupting a developer during discussions, feeling unheard by the team, or talking beyond their level of technical expertise. 

Poor onboarding of developers is one way for developers to not feel part of the team. On one project, there was a time pressure crunch and the team was feeling the pressure to deliver stories. When the team added developers, the team had a \quotes{sink or swim} attitude. For example, the person was left alone with no clear instructions for the first hours on the project. If someone doesn't feel part of the team, how can they feel ownership of the code base? Making a new team member feel welcomed can go a long way.

On one team, during team discussions, the team talked about code but never looked at source code. One developer is a visual learner, and it was hard for the developer to follow discussions. Sometimes the developer hadn’t seen that part of the code in awhile or the team discussed two variants of coding practices without showing a concrete example of the issue. When the developer brought this issue to the team, but the team continued with the status quo, the developer felt marginalized by the team.

As one developer expressed, \quotes{not listening to each other can create apathy.}

When a developer begins to feel that the team doesn't care about them, the developer can begin to care less about the success of the project and the quality of the code base. 

\subsubsection{Decreasing quality}
A product suffering from quality issues threatens the an individual's sense of ownership. First, an engineer may not want to be identified with that product either internally or externally to the company. Second, developers need a balance of feature work and bug fixing each week. Working only on bugs for weeks will affect a sense of ownership.    
 
\subsubsection{Breakdowns in pair programming }
When the pairing experience breaks down, one person drives the code development while their partner simply watches. When one person is writing all the code, individual code ownership replaces collective code ownership.  

Reflecting about one particular situation where their pair took over and ignored their input, a developer said \quotes{I did not understand what was really going on. I wouldn't be able to deeply explain it. I wouldn't be able to maintain it. I didn't really write it, so i feel very little ownership of it.} We call this  \quotes{performance pair programming} when one developer plows through a story, stops listening to their pair. 

Ideally pair programming is a collaborative experience where both individuals can't tell who wrote what code. 

In conclusion, we identified many ways in which a team may decrease its sense of collective code ownership.
\section{Transitioning to Collective Code Ownership}
\label{Transitioning}
For some individuals, they derive their sense of value, worth, and identity from what they produce. Since Sustainable Software Development requires a shift from individual ownership to collective ownership, the transition should not be taken lightly. The transition asks people to shift how they value and perceive themselves. 

A recent hire to Pivotal described his initial experience as \quotes{seeing my work slowly removed from app.} When reflecting on the daily rotation, this developer recalled occasions of wanting to hang onto the work.  In time, his attitude of \quotes{I want to see it through} evolved into \quotes{someone else is going to take over and they're going to do fine. I can move onto something else and that's okay.} 

The developer learned the rhythm of story rotation and developed trust in his team: the rest of the team will do a good job. Developers rolling off a story in flight can look in anticipation to see what the next pair produces and see how they solved the problem. 

Eventually, team members recognize the lack of long term individual authorship, learn to expect their code to be transitory, and thus loosely hold personal contributions. \quotes{The code that I write today may be in the code base for a little while, but will evolve into something better.}  

Some developers transition easily and immediately see the benefits of being able to modify any part of the code base and quickly shift from \quotes{I made this} (personal ownership) to \quotes{we made this} (collective ownership.)

The developer transitions from the role of owner to the role of steward or caretaker. In one interview, a Pivot was struggling to describe their relationship with the code on a very challenging project and settled in on the caretaker metaphor : \quotes{Sometimes I kind of feel like a janitor to it.  Maybe caretaker would be better.  Yeah, probably caretaker. I feel like a janitor just cleans up messes but a caretaker like also makes things better.}

Our ability to control something influences our sense of ownership, and ownership influences our sense of identity. 

For someone transitioning to collective code ownership with strong individual ownership tendencies, we recommend starting that person on a four person team. This will allow the person to see the benefits of shared code ownership while slowly practicing releasing individual ownership. On a four person team, each daily rotation creates pairs with full knowledge of what happened yesterday.  


One Pivotal engineer uses improv games and collaboration games to help teams to practice letting go of control, trusting the team for the final product, and learning to be pleasantly surprised by what emerges. In this regard, sustainable software development is an ensemble performance. 

When a team achieves a sense of collective ownership, the magic happens: \quotes{people are a lot more flexible all across the board with changing things or accepting feedback or collaborating} and \quotes{we want the best possible product that's best for users \ldots we just want the best thing out there.} Then the team can say \quotes{hey this is our code.}

\input{theory-evaluation.tex}

\section{Future Research}
Developers, designers, and product managers all have different goals for their role. In future work,  we plan to examine how collective ownership is driven by different factors for designers, developers, and product managers.

Some programmers naturally adapt to collective code ownership, while others struggle with the transition. In future research we will follow new Pivotal engineers and examine their journey in transitioning from individual code ownership to collective code ownership. Perhaps there are 
specific practices that Pivotal or the development team could employ ease the transition. 

Further research is necessary to determine the optimal team size for collective code ownership. Early indications suggest that a four person team is a sweet spot for introducing Sustainable Software Development. With a four person team of two pairs, each day one developer is working on half of the new feature development. When they rotate the next day, each developer will be paired with a developer from the other pair. Each new pair will have the entire knowledge of what happened yesterday. 
\section{Conclusions}
% The primary benefit to the employer is business agility. The engineering team continues to deliver software week after week, month after month, and survive cataclysmic events. Things do not fall apart when the superstar developer leaves. People can go on vacation whenever they need to because features or components are not critically tied to a particular individual. The team leverages the whole team's talents. This removes bottlenecks of \quotes{only Pat can work on these features.} Critical feature work can be parallelized since anyone can work on the feature, as opposed to an individual code owner. 

% The primary benefit to the engineer team is the ability to work on every story, to understand the entire system, teaching opportunities to share one's expertise and to deeper learn subtle parts of the technologies. 

% The primary cost is a shift from individual code ownership to collective code ownership. For some engineers, their sense of value and self-worth is derived from direct code ownership, and thus transitions to Sustainable Software Development should not be taken lightly. Sustainable Software Development works well with collaborative individuals and may not be suited for people who like to work on their own. Sustainable Software Development works when team members have the maturity to loosely hold temporary personal contributions understanding that the team may enhance any aspect of the product.

% Sustainable Software Development is suited for companies that must routinely deliver value to their customers or stakeholders. Some companies are better positioned to withstand a quarter where nothing happens (from an external perspective) or  \quotes{the forgotten two years of management waste} as described by one manager in this study. Hopefully, competitors have not caught up or surpassed the organization during the lost time. Both Pivotal Labs as a consulting practice and the growth of Pivotal's Cloud Foundry towards market dominance, depend on the continual development of features. Neither can afford to falter and both implement Sustainable Software Development.

% Sustainable Software Development is that software development continues at a regular pace regardless of who is on the team, or rather regardless of changes in team composition.
